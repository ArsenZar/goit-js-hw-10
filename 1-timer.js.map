{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst startBtn = document.querySelector('button[data-start]');\nconst allSpans = document.querySelectorAll('.value');\nstartBtn.disabled = true;\nlet userSelectedDate = null;\n\nconst options = {\n  enableTime: true,\n  dateFormat: \"Y-m-d H:i\",\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n\n    if (selectedDates[0].getTime() <= Date.now()) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n        timeout: 5000,\n        iconUrl: 'https://cdn-icons-png.flaticon.com/512/2734/2734822.png',\n      });\n      startBtn.disabled = true;\n    } else {\n      startBtn.disabled = false;\n      userSelectedDate = selectedDates[0].getTime();\n    }\n  },\n};\n\nflatpickr(\"#datetime-picker\", options);\n\nstartBtn.addEventListener('click', () => {\n  if (userSelectedDate == null) return;\n\n  startBtn.disabled = true;\n  document.querySelector('#datetime-picker').disabled = true;\n\n  const intervalID = setInterval(() => {\n    let diff = userSelectedDate - Date.now();\n    console.log(diff);\n    const dataTimer = convertMs(diff);\n    if (diff <= 0) {\n      clearInterval(intervalID);\n      iziToast.success({\n        title: 'OK',\n        message: 'Finish time!',\n        position: 'topRight',\n      });\n      document.querySelector('#datetime-picker').disabled = false;\n    } else {\n      updateTimerUI(dataTimer);\n    };\n  }, 1000);\n});\n\nfunction updateTimerUI(dataTimer) {\n  let i = 0;\n  for (const key in dataTimer) {\n    allSpans[i].textContent = dataTimer[key];\n    i++;\n  }\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(timeWithoutZero) {\n  return String(timeWithoutZero).padStart(2, '0');\n}\n\n\n\n"],"names":["startBtn","allSpans","userSelectedDate","options","selectedDates","iziToast","flatpickr","intervalID","diff","dataTimer","convertMs","updateTimerUI","i","key","ms","days","addLeadingZero","hours","minutes","seconds","timeWithoutZero"],"mappings":"2GAMA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,iBAAiB,QAAQ,EACnDD,EAAS,SAAW,GACpB,IAAIE,EAAmB,KAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,WAAY,YACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAEjBA,EAAc,CAAC,EAAE,QAAO,GAAM,KAAK,OACrCC,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,WACV,QAAS,IACT,QAAS,yDACjB,CAAO,EACDL,EAAS,SAAW,KAEpBA,EAAS,SAAW,GACpBE,EAAmBE,EAAc,CAAC,EAAE,QAAO,EAE/C,CACF,EAEAE,EAAU,mBAAoBH,CAAO,EAErCH,EAAS,iBAAiB,QAAS,IAAM,CACvC,GAAIE,GAAoB,KAAM,OAE9BF,EAAS,SAAW,GACpB,SAAS,cAAc,kBAAkB,EAAE,SAAW,GAEtD,MAAMO,EAAa,YAAY,IAAM,CACnC,IAAIC,EAAON,EAAmB,KAAK,IAAG,EACtC,QAAQ,IAAIM,CAAI,EAChB,MAAMC,EAAYC,EAAUF,CAAI,EAC5BA,GAAQ,GACV,cAAcD,CAAU,EACxBF,EAAS,QAAQ,CACf,MAAO,KACP,QAAS,eACT,SAAU,UAClB,CAAO,EACD,SAAS,cAAc,kBAAkB,EAAE,SAAW,IAEtDM,EAAcF,CAAS,CAE3B,EAAG,GAAI,CACT,CAAC,EAED,SAASE,EAAcF,EAAW,CAChC,IAAIG,EAAI,EACR,UAAWC,KAAOJ,EAChBR,EAASW,CAAC,EAAE,YAAcH,EAAUI,CAAG,EACvCD,GAEJ,CAEA,SAASF,EAAUI,EAAI,CAQrB,MAAMC,EAAOC,EAAe,KAAK,MAAMF,EAAK,KAAG,CAAC,EAE1CG,EAAQD,EAAe,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAEpDI,EAAUF,EAAe,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEK,EAAUH,EAAe,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAElF,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASH,EAAeI,EAAiB,CACvC,OAAO,OAAOA,CAAe,EAAE,SAAS,EAAG,GAAG,CAChD"}